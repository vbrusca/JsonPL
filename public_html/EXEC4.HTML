<html>
   <head>
      <title>JsonPL v0.5.1</title>
      <script type="text/javascript" src="exec4.js"></script>
      <script type="text/javascript">
         var code = {
            "sys": "class",
            "name": "test1",
            "call": {"sys": "call", "name": "testFunction1", "args": [{"sys": "ref", "val":{"sys": "val", "type": "int", "v": "#.vars.tmp1"}}]},
            "vars": [		
               {
                  "sys": "var",
                  "name": "tmp1",
                  "val": {
                     "sys": "val",
                     "type": "int",
                     "v": "5"
                  }
               },
               {
                  "sys": "var",
                  "name": "tmp2",
                  "val": {
                     "sys": "val",
                     "type": "bool",
                     "v": "false"
                  }         
               },
               {
                  "sys": "var",
                  "name": "tmp3",
                  "val": {
                     "sys": "val",
                     "type": "int[]",
                     "len": "0",
                     "v": [
                        
                     ]
                  }         
               },
               {
                  "sys": "var",
                  "name": "tmp4",
                  "val": {
                     "sys": "val",
                     "type": "int[]",
                     "len": "2",
                     "v": [
                        {"sys":"var", "name":"0", "val":{"sys":"val", "type":"int", "v":"0"}},
                        {"sys":"var", "name":"1", "val":{"sys":"val", "type":"int", "v":"1"}}                        
                     ]
                  }         
               },
               {
                  "sys": "var",
                  "name": "tmp5",
                  "val": {
                     "sys": "val",
                     "type": "string",
                     "v": "#.vars.tmp1"
                  }
               }               
            ],
            "funcs": [
               {
                  "sys": "func",
                  "name": "testFunction1",
                  "args": [ 
                     {
                        "sys": "arg",
                        "name": "i1",
                        "val": {
                           "sys": "val",
                           "type": "int",
                           "v": "0"
                        }
                     }
                  ],
                  "vars": [
                     {
                        "sys": "var",
                        "name": "b1",
                        "val": {
                           "sys": "val",
                           "type": "bool",
                           "v": "false"
                        }
                     },
                     {
                        "sys": "var",
                        "name": "name1",
                        "val": {
                           "sys": "val",
                           "type": "string",
                           "v": "tmp1"
                        }
                     },
                     {
                        "sys": "var",
                        "name": "name2",
                        "val": {
                           "sys": "val",
                           "type": "string",
                           "v": "name1"
                        }
                     }
                  ],
                  "ret": {
                     "sys": "val",
                     "type": "bool",
                     "v": "false"
                  },
                  "lines": [
                     {"sys": "call", "name": "testFunction3", "args": [{"sys": "ref", "val":{"sys": "val", "type": "int", "v": "$.args.i1"}}]}
                  ]
               },
               {
                  "sys": "func",
                  "name": "testFunction2",
                  "args": [
                     {
                        "sys": "arg",
                        "name": "i1",
                        "val": {
                           "sys": "val",
                           "type": "int",
                           "v": "0"
                        }
                     }
                  ],
                  "vars": [
                     {
                        "sys": "var",
                        "name": "b1",
                        "val": {
                           "sys": "val",
                           "type": "bool",
                           "v": "false"
                        }
                     },
                     {
                        "sys": "var",
                        "name": "tmp1",
                        "val": {
                           "sys": "val",
                           "type": "int",
                           "v": "5"
                        }
                     }            
                  ],
                  "ret": {
                     "sys": "val",
                     "type": "bool",
                     "v": "false"
                  },
                  "lines": [
                     {
                        "sys": "asgn",
                        "left": {"sys":"ref", "val":{"sys": "val", "type": "int", "v": "$.vars.tmp1"}},
                        "op": {"sys":"op", "type":"asgn", "v":"="},
                        "right": {"sys":"ref", "val":{"sys": "val", "type": "int", "v": "$.args.i1"}}
                     },
                     {"sys": "return", "val": {"sys":"const", "val":{"sys": "val", "type": "bool", "v": "true"}}}
                  ]
               },
               {
                  "sys": "func",
                  "name": "testFunction3",
                  "args": [
                     {
                        "sys": "arg",
                        "name": "i1",
                        "val": {
                           "sys": "val",
                           "type": "int",
                           "v": "0"
                        }
                     }
                  ],
                  "vars": [
                     {
                        "sys": "var",
                        "name": "b1",
                        "val": {
                           "sys": "val",
                           "type": "bool",
                           "v": "false"
                        }
                     }
                  ],
                  "ret": {
                     "sys": "val",
                     "type": "bool",
                     "v": "false"
                  },
                  "lines": [
                     {"sys": "call", "name": "SYS::wr", "args": [{"sys": "const", "val":{"sys": "val", "type": "string", "v": "hello world"}}]},
                     {"sys":"return", "val": {"sys":"const", "val":{"sys": "val", "type": "bool", "v":"true"}}}
                  ]
               }
            ],
            "ret": {
               "sys": "val",
               "type": "bool",
               "v": "false"
            }
         };

         var code2 = {
            "sys": "class",
            "name": "test2",
            "call": {"sys": "call", "name": "main", "args": []},
            "vars": [
               {
                  "sys": "var",
                  "name": "tmp1",
                  "val": {
                     "sys": "val",
                     "type": "bool",
                     "v": "false"
                  }
               },
               {
                  "sys": "var",
                  "name": "tmp2",
                  "val": {
                     "sys": "val",
                     "type": "bool",
                     "v": "false"
                  }         
               },
               {
                  "sys": "var",
                  "name": "tmp3",
                  "val": {
                     "sys": "val",
                     "type": "bool",
                     "v": "false"
                  }         
               }      
            ],
            "funcs": [
               {
                  "sys": "func",
                  "name": "main",
                  "args": [],
                  "vars": [],
                  "ret": {
                     "sys": "val",
                     "type": "bool",
                     "v": "false"
                  },
                  "lines": [
                     {
                        "sys": "asgn",
                        "left": {"sys":"ref", "val":{"sys": "val", "type": "int", "v": "#.vars.tmp1"}},
                        "op": {"sys":"op", "type":"asgn", "v":"="},
                        "right": {"sys": "call", "name": "SYS::job1", "args": []}
                     },
                     {
                        "sys": "if",
                        "left": {"sys":"ref", "val":{"sys": "val", "type": "int", "v": "#.vars.tmp1"}},
                        "op": {"sys":"op", "type":"bex", "v":"=="},
                        "right": {"sys":"const", "val": {"sys": "val", "type": "bool", "v": "true"}},
                        "thn": [
                           {
                              "sys": "asgn",
                              "left": {"sys":"ref", "val":{"sys": "val", "type": "int", "v": "#.vars.tmp2"}},
                              "op": {"sys":"op", "type":"asgn", "v":"="},
                              "right": {"sys": "call", "name": "SYS::job2", "args": []}
                           },
                           {
                              "sys": "if",
                              "left": {"sys":"ref", "val":{"sys": "val", "type": "int", "v": "#.vars.tmp2"}},
                              "op": {"sys":"op", "type":"bex", "v":"=="},
                              "right": {"sys":"const", "val": {"sys": "val", "type": "bool", "v": "true"}},
                              "thn": [
                                 {
                                    "sys": "asgn",
                                    "left": {"sys":"ref", "val":{"sys": "val", "type": "int", "v": "#.vars.tmp3"}},
                                    "op": {"sys":"op", "type":"asgn", "v":"="},
                                    "right": {"sys": "call", "name": "SYS::job3", "args": []}
                                 }
                              ],
                              "els": [
                              ]
                           }            
                        ],
                        "els": [
                        ]
                     }
                  ]
               }
            ],
            "ret": {
               "sys": "val",
               "type": "bool",
               "v": "false"
            }
         };

         /**
          * Name: init
          * Desc: A function to init the test page.
          */
         function init() {
            var txtArea = document.getElementById('message');
         
            jsonPlState.prototype.wr = function(s) {
               if (this.LOGGING === true) {
                  console.log(this.WR_PREFIX + s);
                  txtArea.value += (this.WR_PREFIX + s + "\n");
               }
            };
            
            jsonPlState.prototype.wrObj = function(s) {
               if (this.LOGGING === true) {
                  console.log(this.WR_PREFIX + JSON.stringify(s, null, 2));
                  txtArea.value += (this.WR_PREFIX + JSON.stringify(s, null, 2) + "\n");
               }
            };
         
            /////////////////////////TEST SECTION
            var bres = false;            
            var testObj = null;
            var jpl = new jsonPlState();
            jpl.program = JSON.parse(JSON.stringify(code));

            testObj = {
               "sys": "for",
               "start": {"sys": "const", "val": {"sys": "val","type": "int","v": "0"}},
               "stop": {"sys": "const", "val": {"sys": "val","type": "int","v": "10"}},
               "inc": {"sys": "const", "val": {"sys": "val","type": "int","v": "1"}},
               "lines": [
               ]
            };

            jpl.wr("====================== TEST -3.10: Unit Tests: toArray ======================");
            bres = jpl.toArray("1");
            jpl.wr("\"1\" is " + bres);

            bres = jpl.toArray(1);
            jpl.wr("1 is " + bres);            

            bres = jpl.toArray(-1);
            jpl.wr("-1 is " + bres);

            bres = jpl.toArray(1.25);
            jpl.wr("1.25 is " + bres);

            bres = jpl.toArray(1.0);
            jpl.wr("1.0 is " + bres);

            bres = jpl.toArray(1.00);
            jpl.wr("1.00 is " + bres);

            bres = jpl.toArray("1.0");
            jpl.wr("\"1.0\" is " + bres);            

            bres = jpl.toArray([]);
            jpl.wr("[] is " + bres);

            bres = jpl.toArray({});
            jpl.wr("{} is " + bres);

            bres = jpl.toArray(true);
            jpl.wr("true is " + bres);

            bres = jpl.toArray(false);
            jpl.wr("false is " + bres);            

            bres = jpl.toArray("test");
            jpl.wr("\"test\" is " + bres);            

            jpl.wr("====================== TEST -3.00: Unit Tests: toFloat ======================");
            bres = jpl.toFloat("1");
            jpl.wr("\"1\" is " + bres);

            bres = jpl.toFloat(1);
            jpl.wr("1 is " + bres);            

            bres = jpl.toFloat(-1);
            jpl.wr("-1 is " + bres);

            bres = jpl.toFloat(1.25);
            jpl.wr("1.25 is " + bres);

            bres = jpl.toFloat(1.0);
            jpl.wr("1.0 is " + bres);

            bres = jpl.toFloat(1.00);
            jpl.wr("1.00 is " + bres);

            bres = jpl.toFloat("1.0");
            jpl.wr("\"1.0\" is " + bres);            

            bres = jpl.toFloat([]);
            jpl.wr("[] is " + bres);

            bres = jpl.toFloat({});
            jpl.wr("{} is " + bres);

            bres = jpl.toFloat(true);
            jpl.wr("true is " + bres);

            bres = jpl.toFloat(false);
            jpl.wr("false is " + bres);            

            bres = jpl.toFloat("test");
            jpl.wr("\"test\" is " + bres);

            jpl.wr("====================== TEST -2.90: Unit Tests: toStr ======================");
            bres = jpl.toStr(1);
            jpl.wr("1 is " + bres);

            bres = jpl.toStr(1.24);
            jpl.wr("1.24 is " + bres);            

            bres = jpl.toStr(-1);
            jpl.wr("-1 is " + bres);

            bres = jpl.toStr([1,2,3]);
            jpl.wr("[1,2,3] is " + bres);

            bres = jpl.toStr({"test":"test"});
            jpl.wr("{\"test\":\"test\"} is " + bres);

            bres = jpl.toStr("testing123");
            jpl.wr("testing123 is " + bres);

            bres = jpl.toStr(false);
            jpl.wr("false is " + bres);

            jpl.wr("====================== TEST -2.80: Unit Tests: toInt ======================");
            bres = jpl.toInt("1");
            jpl.wr("\"1\" is " + bres);

            bres = jpl.toInt(1);
            jpl.wr("1 is " + bres);            

            bres = jpl.toInt(-1);
            jpl.wr("-1 is " + bres);

            bres = jpl.toInt(1.25);
            jpl.wr("1.25 is " + bres);

            bres = jpl.toInt(1.0);
            jpl.wr("1.0 is " + bres);

            bres = jpl.toInt(1.00);
            jpl.wr("1.00 is " + bres);

            bres = jpl.toInt("1.0");
            jpl.wr("\"1.0\" is " + bres);

            bres = jpl.toInt([]);
            jpl.wr("[] is " + bres);

            bres = jpl.toInt({});
            jpl.wr("{} is " + bres);

            bres = jpl.toInt(true);
            jpl.wr("true is " + bres);

            bres = jpl.toInt(false);
            jpl.wr("false is " + bres);            

            bres = jpl.toInt("test");
            jpl.wr("\"test\" is " + bres);

            jpl.wr("====================== TEST -2.70: Unit Tests: toBoolInt ======================");       
            bres = jpl.toBoolInt(true);
            jpl.wr("true is " + bres);

            bres = jpl.toBoolInt("true");
            jpl.wr("\"true\" is " + bres);

            bres = jpl.toBoolInt(1);
            jpl.wr("1 is " + bres);

            bres = jpl.toBoolInt(1.0);
            jpl.wr("1.0 is " + bres);

            bres = jpl.toBoolInt("1");
            jpl.wr("\"1\" is " + bres);

            bres = jpl.toBoolInt("1.0");
            jpl.wr("\"1.0\" is " + bres);

            bres = jpl.toBoolInt("yes");
            jpl.wr("\"yes\" is " + bres);

            bres = jpl.toBoolInt(false);            
            jpl.wr("false is " + bres);

            bres = jpl.toBoolInt("false");
            jpl.wr("\"false\" is " + bres);

            bres = jpl.toBoolInt(0);
            jpl.wr("0 is " + bres);

            bres = jpl.toBoolInt(0.0);
            jpl.wr("0.0 is " + bres);

            bres = jpl.toBoolInt("0");
            jpl.wr("\"0\" is " + bres);

            bres = jpl.toBoolInt("0.0");
            jpl.wr("\"0.0\" is " + bres);

            bres = jpl.toBoolInt("no");
            jpl.wr("\"no\" is " + bres);

            bres = jpl.toBoolInt("2");
            jpl.wr("\"2\" is " + bres);            

            bres = jpl.toBoolInt("test");
            jpl.wr("\"test\" is " + bres);            

            bres = jpl.toBoolInt(2);
            jpl.wr("2 is " + bres);            

            bres = jpl.toBoolInt(1.25);
            jpl.wr("1.25 is " + bres);

            bres = jpl.toBoolInt([]);
            jpl.wr("[] is " + bres);

            bres = jpl.toBoolInt({});
            jpl.wr("{} is " + bres);             

            jpl.wr("====================== TEST -2.70: Unit Tests: toBool ======================");       
            bres = jpl.toBool(true);
            jpl.wr("true is " + bres);

            bres = jpl.toBool("true");
            jpl.wr("\"true\" is " + bres);

            bres = jpl.toBool(1);
            jpl.wr("1 is " + bres);

            bres = jpl.toBool(1.0);
            jpl.wr("1.0 is " + bres);

            bres = jpl.toBool("1");
            jpl.wr("\"1\" is " + bres);

            bres = jpl.toBool("1.0");
            jpl.wr("\"1.0\" is " + bres);

            bres = jpl.toBool("yes");
            jpl.wr("\"yes\" is " + bres);

            bres = jpl.toBool(false);            
            jpl.wr("false is " + bres);

            bres = jpl.toBool("false");
            jpl.wr("\"false\" is " + bres);

            bres = jpl.toBool(0);
            jpl.wr("0 is " + bres);

            bres = jpl.toBool(0.0);
            jpl.wr("0.0 is " + bres);

            bres = jpl.toBool("0");
            jpl.wr("\"0\" is " + bres);

            bres = jpl.toBool("0.0");
            jpl.wr("\"0.0\" is " + bres);

            bres = jpl.toBool("no");
            jpl.wr("\"no\" is " + bres);

            bres = jpl.toBool("2");
            jpl.wr("\"2\" is " + bres);            

            bres = jpl.toBool("test");
            jpl.wr("\"test\" is " + bres);            

            bres = jpl.toBool(2);
            jpl.wr("2 is " + bres);            

            bres = jpl.toBool(1.25);
            jpl.wr("1.25 is " + bres);

            bres = jpl.toBool([]);
            jpl.wr("[] is " + bres);

            bres = jpl.toBool({});
            jpl.wr("{} is " + bres);            
            
            jpl.wr("====================== TEST -2.60: Unit Tests: getPathAndUrlFromRef ======================");
            bres = jpl.getPathAndUrlFromRef("#.vars.tmp1");
            jpl.wr("\"#.vars.tmp1\" is " + bres);

            bres = jpl.getPathAndUrlFromRef("$.args.tmp2");
            jpl.wr("\"$.args.tmp2\" is " + bres);

            bres = jpl.getPathAndUrlFromRef("#.vars.tmp1.1");
            jpl.wr("\"#.vars.tmp1.1\" is " + bres);

            bres = jpl.getPathAndUrlFromRef("$.args.tmp2.tmp");
            jpl.wr("\"$.args.tmp2.tmp\" is " + bres);

            bres = jpl.getPathAndUrlFromRef("$.vars.tmp3.4");
            jpl.wr("\"$.vars.tmp3.4\" is " + bres);

            bres = jpl.getPathAndUrlFromRef("test");
            jpl.wr("\"test\" is " + bres);

            bres = jpl.getPathAndUrlFromRef("<#.vars.tmp1>");
            jpl.wr("\"<#.vars.tmp1>\" is " + bres);

            bres = jpl.getPathAndUrlFromRef("$.vars.[$.vars.tmp3]");
            jpl.wr("\"$.vars.[$.vars.tmp3]\" is " + bres);

            bres = jpl.getPathAndUrlFromRef("$.vars.tmp1.[$.vars.tmp3]");
            jpl.wr("\"$.vars.tmp1.[$.vars.tmp3]\" is " + bres);

            bres = jpl.getPathAndUrlFromRef("#.vars.tmp1->(http://localhost:8000/)");
            jpl.wr("\"#.vars.tmp1->(http://localhost:8000/)\" is " + bres);

            bres = jpl.getPathAndUrlFromRef("$.args.tmp2->(http://localhost:8000/)");
            jpl.wr("\"$.args.tmp2->(http://localhost:8000/)\" is " + bres);

            bres = jpl.getPathAndUrlFromRef("#.vars.tmp1.1->(http://localhost:8000/)");
            jpl.wr("\"#.vars.tmp1.1->(http://localhost:8000/)\" is " + bres);

            bres = jpl.getPathAndUrlFromRef("$.args.tmp2.tmp->(http://localhost:8000/)");
            jpl.wr("\"$.args.tmp2.tmp->(http://localhost:8000/)\" is " + bres);

            bres = jpl.getPathAndUrlFromRef("$.vars.tmp3.4->(http://localhost:8000/)");
            jpl.wr("\"$.vars.tmp3.4->(http://localhost:8000/)\" is " + bres);

            bres = jpl.getPathAndUrlFromRef("test->(http://localhost:8000/)");
            jpl.wr("\"test->(http://localhost:8000/)\" is " + bres);

            bres = jpl.getPathAndUrlFromRef("<#.vars.tmp1>->(http://localhost:8000/)");
            jpl.wr("\"<#.vars.tmp1>->(http://localhost:8000/)\" is " + bres);

            bres = jpl.getPathAndUrlFromRef("$.vars.[$.vars.tmp3]->(http://localhost:8000/)");
            jpl.wr("\"$.vars.[$.vars.tmp3]->(http://localhost:8000/)\" is " + bres);

            bres = jpl.getPathAndUrlFromRef("$.vars.tmp1.[$.vars.tmp3]->(http://localhost:8000/)");
            jpl.wr("\"$.vars.tmp1.[$.vars.tmp3]->(http://localhost:8000/)\" is " + bres);            

            jpl.wr("====================== TEST -2.50: Unit Tests: getSysObjType ======================");
            tmp = {"sys": "for", "each": {"sys":"ref", "val":{"sys":"val", "type":"int", "v":"#.vars.tmp1"}},"lines": []};
            bres = jpl.getSysObjType(tmp);
            jpl.wr('{"sys": "for", "each": {"sys":"ref", "val":{"sys":"val", "type":"int", "v":"#.vars.tmp1"}},"lines": []} is ');
            jpl.wrObjAbr(bres);

            bres = jpl.getSysObjType(testObj);
            jpl.wrObjAbr(testObj);
            jpl.wr(" is ");
            jpl.wrObjAbr(bres);

            tmp = {"sys":"const", "val":{"sys":"val", "type":"int", "v":"567"}};
            bres = jpl.getSysObjType(tmp);
            jpl.wrObjAbr(testObj);
            jpl.wr(" is ");
            jpl.wrObjAbr(bres);

            jpl.wr("====================== TEST -2.49: Unit Tests: sysGetArrayIdxRef ======================");
            bres = jpl.sysGetArrayIdxRef(jpl.toArray(1), null);
            jpl.wr("1 is " + bres);

            bres = jpl.sysGetArrayIdxRef(jpl.toArray(1.24), null);
            jpl.wr("1.24 is " + bres);            

            bres = jpl.sysGetArrayIdxRef(jpl.toArray(-1), null);
            jpl.wr("-1 is " + bres);

            bres = jpl.sysGetArrayIdxRef(jpl.toArray([1,2,3]), null);
            jpl.wr("[1,2,3] is " + bres);

            bres = jpl.sysGetArrayIdxRef(jpl.toArray("{\"test\":\"test\"}"), null);
            jpl.wr("{\"test\":\"test\"} is " + bres);

            bres = jpl.sysGetArrayIdxRef(jpl.toArray("testing123"), null);
            jpl.wr("testing123 is " + bres);

            bres = jpl.sysGetArrayIdxRef(jpl.toArray(false), null);
            jpl.wr("false is " + bres);

            jpl.wr("====================== TEST -2.48: Unit Tests: sysGetArrayIdxRefStr ======================");
            bres = jpl.sysGetArrayIdxRefStr(jpl.toArray(1), null);
            jpl.wr("1 is " + bres);

            bres = jpl.sysGetArrayIdxRefStr(jpl.toArray(1.24), null);
            jpl.wr("1.24 is " + bres);            

            bres = jpl.sysGetArrayIdxRefStr(jpl.toArray(-1), null);
            jpl.wr("-1 is " + bres);

            bres = jpl.sysGetArrayIdxRefStr(jpl.toArray([1,2,3]), null);
            jpl.wr("[1,2,3] is " + bres);

            bres = jpl.sysGetArrayIdxRefStr(jpl.toArray("{\"test\":\"test\"}"), null);
            jpl.wr("{\"test\":\"test\"} is " + bres);

            bres = jpl.sysGetArrayIdxRefStr(jpl.toArray("testing123"), null);
            jpl.wr("testing123 is " + bres);

            bres = jpl.sysGetArrayIdxRefStr(jpl.toArray(false), null);
            jpl.wr("false is " + bres);

            jpl.wr("====================== TEST -2.47: Unit Tests: sysGetRef ======================");
            bres = jpl.sysGetRef(jpl.toArray(1), null);
            jpl.wr("1 is " + bres);

            bres = jpl.sysGetRef(jpl.toArray(1.24), null);
            jpl.wr("1.24 is " + bres);            

            bres = jpl.sysGetRef(jpl.toArray(-1), null);
            jpl.wr("-1 is " + bres);

            bres = jpl.sysGetRef(jpl.toArray([1,2,3]), null);
            jpl.wr("[1,2,3] is " + bres);

            bres = jpl.sysGetRef(jpl.toArray("{\"test\":\"test\"}"), null);
            jpl.wr("{\"test\":\"test\"} is " + bres);

            bres = jpl.sysGetRef(jpl.toArray("testing123"), null);
            jpl.wr("testing123 is " + bres);

            bres = jpl.sysGetRef(jpl.toArray(false), null);
            jpl.wr("false is " + bres);

            jpl.wr("====================== TEST -2.46: Unit Tests: sysGetRefStr ======================");
            bres = jpl.sysGetRefStr(jpl.toArray(1), null);
            jpl.wr("1 is " + bres);

            bres = jpl.sysGetRefStr(jpl.toArray(1.24), null);
            jpl.wr("1.24 is " + bres);            

            bres = jpl.sysGetRefStr(jpl.toArray(-1), null);
            jpl.wr("-1 is " + bres);

            bres = jpl.sysGetRefStr(jpl.toArray([1,2,3]), null);
            jpl.wr("[1,2,3] is " + bres);

            bres = jpl.sysGetRefStr(jpl.toArray("{\"test\":\"test\"}"), null);
            jpl.wr("{\"test\":\"test\"} is " + bres);

            bres = jpl.sysGetRefStr(jpl.toArray("testing123"), null);
            jpl.wr("testing123 is " + bres);

            bres = jpl.sysGetRefStr(jpl.toArray(false), null);
            jpl.wr("false is " + bres);

            jpl.wr("====================== TEST -2.45: Unit Tests: sysMallocArray ======================");
            tmp = {"sys": "for", "each": {"sys":"ref", "val":{"sys":"val", "type":"int", "v":"#.vars.tmp1"}},"lines": []};
            bres = jpl.sysMallocArray(jpl.toArray(tmp), null);
            jpl.wr('{"sys": "for", "each": {"sys":"ref", "val":{"sys":"val", "type":"int", "v":"#.vars.tmp1"}},"lines": []} is ');
            jpl.wrObjAbr(bres);

            bres = jpl.sysMallocArray(jpl.toArray(testObj), null);
            jpl.wrObjAbr(testObj);
            jpl.wr(" is ");
            jpl.wrObjAbr(bres);

            tmp = {"sys":"const", "val":{"sys":"val", "type":"int", "v":"567"}};
            bres = jpl.sysMallocArray(jpl.toArray(tmp), null);
            jpl.wrObjAbr(tmp);
            jpl.wr(" is ");
            jpl.wrObjAbr(bres);

            bres = jpl.sysMallocArray(jpl.toArray("SYS:getLastAsgnValue"), null);
            jpl.wr("\"SYS:getLastAsgnValue\" is ");
            jpl.wrObjAbr(bres);            

            jpl.wr("====================== TEST -2.44: Unit Tests: sysMalloc ======================");
            tmp = {"sys": "for", "each": {"sys":"ref", "val":{"sys":"val", "type":"int", "v":"#.vars.tmp1"}},"lines": []};
            bres = jpl.sysMalloc(jpl.toArray(tmp), null);
            jpl.wr('{"sys": "for", "each": {"sys":"ref", "val":{"sys":"val", "type":"int", "v":"#.vars.tmp1"}},"lines": []} is ');
            jpl.wrObjAbr(bres);

            bres = jpl.sysMalloc(jpl.toArray(testObj), null);
            jpl.wrObjAbr(testObj);
            jpl.wr(" is ");
            jpl.wrObjAbr(bres);

            tmp = {"sys":"const", "val":{"sys":"val", "type":"int", "v":"567"}};
            bres = jpl.sysMalloc(jpl.toArray(tmp), null);
            jpl.wrObjAbr(tmp);
            jpl.wr(" is ");
            jpl.wrObjAbr(bres);

            bres = jpl.sysMalloc(jpl.toArray("SYS:getLastAsgnValue"), null);
            jpl.wr("\"SYS:getLastAsgnValue\" is ");
            jpl.wrObjAbr(bres);

            jpl.wr("====================== TEST -2.43: Unit Tests: sysClean ======================");
            tmp = {"sys": "for", "each": {"sys":"ref", "val":{"sys":"val", "type":"int", "v":"#.vars.tmp1"}},"lines": []};
            bres = jpl.sysClean(jpl.toArray(tmp), null);
            jpl.wr('{"sys": "for", "each": {"sys":"ref", "val":{"sys":"val", "type":"int", "v":"#.vars.tmp1"}},"lines": []} is ');
            jpl.wrObjAbr(bres);

            bres = jpl.sysClean(jpl.toArray(testObj), null);
            jpl.wrObjAbr(testObj);
            jpl.wr(" is ");
            jpl.wrObjAbr(bres);

            tmp = {"sys":"const", "val":{"sys":"val", "type":"int", "v":"567"}};
            bres = jpl.sysClean(jpl.toArray(tmp), null);
            jpl.wrObjAbr(tmp);
            jpl.wr(" is ");
            jpl.wrObjAbr(bres);

            bres = jpl.sysClean(jpl.toArray("SYS:getLastAsgnValue"), null);
            jpl.wr("\"SYS:getLastAsgnValue\" is ");
            jpl.wrObjAbr(bres);

            jpl.wr("====================== TEST -2.42: Unit Tests: sysWr ======================");
            tmp = {"sys": "for", "each": {"sys":"ref", "val":{"sys":"val", "type":"int", "v":"#.vars.tmp1"}},"lines": []};
            bres = jpl.sysWr(jpl.toArray(tmp), null, null);
            jpl.wr('{"sys": "for", "each": {"sys":"ref", "val":{"sys":"val", "type":"int", "v":"#.vars.tmp1"}},"lines": []} is ');
            jpl.wrObjAbr(bres);

            bres = jpl.sysWr(jpl.toArray(testObj), null, null);
            jpl.wrObjAbr(testObj);
            jpl.wr(" is ");
            jpl.wrObjAbr(bres);

            tmp = {"sys":"const", "val":{"sys":"val", "type":"int", "v":"567"}};
            bres = jpl.sysWr(jpl.toArray(tmp), null, null);
            jpl.wrObjAbr(tmp);
            jpl.wr(" is ");
            jpl.wrObjAbr(bres);

            bres = jpl.sysWr(jpl.toArray("SYS:getLastAsgnValue"), null, null);
            jpl.wr("\"SYS:getLastAsgnValue\" is ");
            jpl.wrObjAbr(bres);

            jpl.wr("====================== TEST -2.41: Unit Tests: sysLen ======================");
            tmp = {"sys": "for", "each": {"sys":"ref", "val":{"sys":"val", "type":"int", "v":"#.vars.tmp1"}},"lines": []};
            bres = jpl.sysLen(jpl.toArray(tmp), null);
            jpl.wr('{"sys": "for", "each": {"sys":"ref", "val":{"sys":"val", "type":"int", "v":"#.vars.tmp1"}},"lines": []} is ');
            jpl.wrObjAbr(bres);

            bres = jpl.sysLen(jpl.toArray(testObj), null);
            jpl.wrObjAbr(testObj);
            jpl.wr(" is ");
            jpl.wrObjAbr(bres);

            tmp = {"sys":"const", "val":{"sys":"val", "type":"int", "v":"567"}};
            bres = jpl.sysLen(jpl.toArray(tmp), null);
            jpl.wrObjAbr(tmp);
            jpl.wr(" is ");
            jpl.wrObjAbr(bres);

            bres = jpl.sysLen(jpl.toArray("SYS:getLastAsgnValue"), null);
            jpl.wr("\"SYS:getLastAsgnValue\" is ");
            jpl.wrObjAbr(bres);

            jpl.wr("====================== TEST -2.40: Unit Tests: sysType ======================");
            tmp = {"sys": "for", "each": {"sys":"ref", "val":{"sys":"val", "type":"int", "v":"#.vars.tmp1"}},"lines": []};
            bres = jpl.sysType(jpl.toArray(tmp), null);
            jpl.wr('{"sys": "for", "each": {"sys":"ref", "val":{"sys":"val", "type":"int", "v":"#.vars.tmp1"}},"lines": []} is ');
            jpl.wrObjAbr(bres);

            bres = jpl.sysType(jpl.toArray(testObj), null);
            jpl.wrObjAbr(testObj);
            jpl.wr(" is ");
            jpl.wrObjAbr(bres);

            tmp = {"sys":"const", "val":{"sys":"val", "type":"int", "v":"567"}};
            bres = jpl.sysType(jpl.toArray(tmp), null);
            jpl.wrObjAbr(tmp);
            jpl.wr(" is ");
            jpl.wrObjAbr(bres);

            bres = jpl.sysType(jpl.toArray("SYS:getLastAsgnValue"), null);
            jpl.wr("\"SYS:getLastAsgnValue\" is ");
            jpl.wrObjAbr(bres);

            jpl.wr("====================== TEST -2.30: Unit Tests: isFullFor ======================");
            tmp = {"sys": "for", "each": {"sys":"ref", "val":{"sys":"val", "type":"int", "v":"#.vars.tmp1"}},"lines": []};
            bres = jpl.isFullFor(tmp);
            jpl.wr('{"sys": "for", "each": {"sys":"ref", "val":{"sys":"val", "type":"int", "v":"#.vars.tmp1"}},"lines": []} is ');
            jpl.wrObjAbr(bres);

            bres = jpl.isFullFor(testObj);
            jpl.wrObjAbr(testObj);
            jpl.wr(" is ");
            jpl.wrObjAbr(bres);

            jpl.wr("====================== TEST -2.20: Unit Tests: isForEach ======================");
            tmp = {"sys": "for", "each": {"sys":"ref", "val":{"sys":"val", "type":"int", "v":"#.vars.tmp1"}},"lines": []};
            bres = jpl.isForEach(tmp);
            jpl.wr('{"sys": "for", "each": {"sys":"ref", "val":{"sys":"val", "type":"int", "v":"#.vars.tmp1"}},"lines": []} is ' + bres);

            bres = jpl.isForEach(testObj);
            jpl.wrObjAbr(testObj);
            jpl.wr(" is ");
            jpl.wrObjAbr(bres);

            jpl.wr("====================== TEST -2.10: Unit Tests: isFuncSys ======================");
            bres = jpl.isFuncSys("getMax");
            jpl.wr("\"getMax\" is " + bres);

            bres = jpl.isFuncSys("getMin");
            jpl.wr("\"getMin\" is " + bres);

            bres = jpl.isFuncSys("SYS::wr");
            jpl.wr("\"SYS::wr\" is " + bres);

            bres = jpl.isFuncSys("SYS:getLastAsgnValue");
            jpl.wr("\"SYS:getLastAsgnValue\" is " + bres);

            bres = jpl.isFuncSys("$.vars.tmp3.4");
            jpl.wr("\"$.vars.tmp3.4\" is " + bres);

            bres = jpl.isFuncSys("test");
            jpl.wr("\"test\" is " + bres);

            jpl.wr("====================== TEST -2.00: Unit Tests: isRefStringUrl ======================");
            bres = jpl.isRefStringUrl("#.vars.tmp1");
            jpl.wr("\"#.vars.tmp1\" is " + bres);

            bres = jpl.isRefStringUrl("$.args.tmp2");
            jpl.wr("\"$.args.tmp2\" is " + bres);

            bres = jpl.isRefStringUrl("#.vars.tmp1.1");
            jpl.wr("\"#.vars.tmp1.1\" is " + bres);

            bres = jpl.isRefStringUrl("$.args.tmp2.tmp");
            jpl.wr("\"$.args.tmp2.tmp\" is " + bres);

            bres = jpl.isRefStringUrl("$.vars.tmp3.4");
            jpl.wr("\"$.vars.tmp3.4\" is " + bres);

            bres = jpl.isRefStringUrl("test");
            jpl.wr("\"test\" is " + bres);

            bres = jpl.isRefStringUrl("<#.vars.tmp1>");
            jpl.wr("\"<#.vars.tmp1>\" is " + bres);

            bres = jpl.isRefStringUrl("$.vars.[$.vars.tmp3]");
            jpl.wr("\"$.vars.[$.vars.tmp3]\" is " + bres);

            bres = jpl.isRefStringUrl("$.vars.tmp1.[$.vars.tmp3]");
            jpl.wr("\"$.vars.tmp1.[$.vars.tmp3]\" is " + bres);

            bres = jpl.isRefStringUrl("#.vars.tmp1->(http://localhost:8000/)");
            jpl.wr("\"#.vars.tmp1->(http://localhost:8000/)\" is " + bres);

            bres = jpl.isRefStringUrl("$.args.tmp2->(http://localhost:8000/)");
            jpl.wr("\"$.args.tmp2->(http://localhost:8000/)\" is " + bres);

            bres = jpl.isRefStringUrl("#.vars.tmp1.1->(http://localhost:8000/)");
            jpl.wr("\"#.vars.tmp1.1->(http://localhost:8000/)\" is " + bres);

            bres = jpl.isRefStringUrl("$.args.tmp2.tmp->(http://localhost:8000/)");
            jpl.wr("\"$.args.tmp2.tmp->(http://localhost:8000/)\" is " + bres);

            bres = jpl.isRefStringUrl("$.vars.tmp3.4->(http://localhost:8000/)");
            jpl.wr("\"$.vars.tmp3.4->(http://localhost:8000/)\" is " + bres);

            bres = jpl.isRefStringUrl("test->(http://localhost:8000/)");
            jpl.wr("\"test->(http://localhost:8000/)\" is " + bres);

            bres = jpl.isRefStringUrl("<#.vars.tmp1>->(http://localhost:8000/)");
            jpl.wr("\"<#.vars.tmp1>->(http://localhost:8000/)\" is " + bres);

            bres = jpl.isRefStringUrl("$.vars.[$.vars.tmp3]->(http://localhost:8000/)");
            jpl.wr("\"$.vars.[$.vars.tmp3]->(http://localhost:8000/)\" is " + bres);

            bres = jpl.isRefStringUrl("$.vars.tmp1.[$.vars.tmp3]->(http://localhost:8000/)");
            jpl.wr("\"$.vars.tmp1.[$.vars.tmp3]->(http://localhost:8000/)\" is " + bres);

            jpl.wr("====================== TEST -1.90: Unit Tests: isRefStringArrayDec ======================");
            bres = jpl.isRefStringArrayDec("#.vars.tmp1");
            jpl.wr("\"#.vars.tmp1\" is " + bres);

            bres = jpl.isRefStringArrayDec("$.args.tmp2");
            jpl.wr("\"$.args.tmp2\" is " + bres);

            bres = jpl.isRefStringArrayDec("#.vars.tmp1.1");
            jpl.wr("\"#.vars.tmp1.1\" is " + bres);

            bres = jpl.isRefStringArrayDec("$.args.tmp2.tmp");
            jpl.wr("\"$.args.tmp2.tmp\" is " + bres);

            bres = jpl.isRefStringArrayDec("$.vars.tmp3.4");
            jpl.wr("\"$.vars.tmp3.4\" is " + bres);

            bres = jpl.isRefStringArrayDec("test");
            jpl.wr("\"test\" is " + bres);

            bres = jpl.isRefStringArrayDec("<#.vars.tmp1>");
            jpl.wr("\"<#.vars.tmp1>\" is " + bres);

            bres = jpl.isRefStringArrayDec("$.vars.[$.vars.tmp3]");
            jpl.wr("\"$.vars.[$.vars.tmp3]\" is " + bres);

            bres = jpl.isRefStringArrayDec("$.vars.tmp1.[$.vars.tmp3]");
            jpl.wr("\"$.vars.tmp1.[$.vars.tmp3]\" is " + bres);            

            jpl.wr("====================== TEST -1.80: Unit Tests: isRefStringArray ======================");
            bres = jpl.isRefStringArray("#.vars.tmp1");
            jpl.wr("\"#.vars.tmp1\" is " + bres);

            bres = jpl.isRefStringArray("$.args.tmp2");
            jpl.wr("\"$.args.tmp2\" is " + bres);

            bres = jpl.isRefStringArray("$.vars.tmp3");
            jpl.wr("\"$.vars.tmp3\" is " + bres);

            bres = jpl.isRefStringArray("#.vars.tmp1.1");
            jpl.wr("\"#.vars.tmp1.1\" is " + bres);

            bres = jpl.isRefStringArray("$.args.tmp2.tmp");
            jpl.wr("\"$.args.tmp2.tmp\" is " + bres);

            bres = jpl.isRefStringArray("$.vars.tmp3.4");
            jpl.wr("\"$.vars.tmp3.4\" is " + bres);

            bres = jpl.isRefStringArray("test");
            jpl.wr("\"test\" is " + bres);

            bres = jpl.isRefStringArray("<#.vars.tmp1>");
            jpl.wr("\"<#.vars.tmp1>\" is " + bres);

            bres = jpl.isRefStringArray("$.vars.[$.vars.tmp3]");
            jpl.wr("\"$.vars.[$.vars.tmp3]\" is " + bres);
            
            bres = jpl.isRefStringArray("$.vars.tmp1.[$.vars.tmp3]");
            jpl.wr("\"$.vars.tmp1.[$.vars.tmp3]\" is " + bres);            

            jpl.wr("====================== TEST -1.71: Unit Tests: isRefStringDec ======================");
            bres = jpl.isRefStringDec("#.vars.tmp1");
            jpl.wr("\"#.vars.tmp1\" is " + bres);

            bres = jpl.isRefStringDec("$.args.tmp2");
            jpl.wr("\"$.args.tmp2\" is " + bres);

            bres = jpl.isRefStringDec("$.vars.tmp3");
            jpl.wr("\"$.vars.tmp3\" is " + bres);

            bres = jpl.isRefStringDec("#.vars.tmp1.1");
            jpl.wr("\"#.vars.tmp1.1\" is " + bres);

            bres = jpl.isRefStringDec("$.args.tmp2.tmp");
            jpl.wr("\"$.args.tmp2.tmp\" is " + bres);

            bres = jpl.isRefStringDec("$.vars.tmp3.4");
            jpl.wr("\"$.vars.tmp3.4\" is " + bres);

            bres = jpl.isRefStringDec("test");
            jpl.wr("\"test\" is " + bres);

            bres = jpl.isRefStringDec("<#.vars.tmp1>");
            jpl.wr("\"<#.vars.tmp1>\" is " + bres);

            bres = jpl.isRefStringDec("$.vars.[$.vars.tmp3]");
            jpl.wr("\"$.vars.[$.vars.tmp3]\" is " + bres);

            bres = jpl.isRefStringDec("$.vars.tmp1.[$.vars.tmp3]");
            jpl.wr("\"$.vars.tmp1.[$.vars.tmp3]\" is " + bres);            

            jpl.wr("====================== TEST -1.70: Unit Tests: isRefString ======================");
            bres = jpl.isRefString("#.vars.tmp1");
            jpl.wr("\"#.vars.tmp1\" is " + bres);

            bres = jpl.isRefString("$.args.tmp2");
            jpl.wr("\"$.args.tmp2\" is " + bres);

            bres = jpl.isRefString("$.vars.tmp3");
            jpl.wr("\"$.vars.tmp3\" is " + bres);

            bres = jpl.isRefString("#.vars.tmp1.1");
            jpl.wr("\"#.vars.tmp1.1\" is " + bres);

            bres = jpl.isRefString("$.args.tmp2.tmp");
            jpl.wr("\"$.args.tmp2.tmp\" is " + bres);

            bres = jpl.isRefString("$.vars.tmp3.4");
            jpl.wr("\"$.vars.tmp3.4\" is " + bres);

            bres = jpl.isRefString("test");
            jpl.wr("\"test\" is " + bres);

            bres = jpl.isRefString("<#.vars.tmp1>");
            jpl.wr("\"<#.vars.tmp1>\" is " + bres);

            bres = jpl.isRefString("$.vars.[$.vars.tmp3]");
            jpl.wr("\"$.vars.[$.vars.tmp3]\" is " + bres);
            
            bres = jpl.isRefString("$.vars.tmp1.[$.vars.tmp3]");
            jpl.wr("\"$.vars.tmp1.[$.vars.tmp3]\" is " + bres);            

            jpl.wr("====================== TEST -1.60: Unit Tests: isBaseType ======================");
            bres = jpl.isBaseType("int[]");
            jpl.wr("int[] is " + bres);

            bres = jpl.isBaseType("float[]");
            jpl.wr("float[] is " + bres);

            bres = jpl.isBaseType("bool[]");
            jpl.wr("bool[] is " + bres);

            bres = jpl.isBaseType("string[]");
            jpl.wr("string[] is " + bres);

            bres = jpl.isBaseType("int");
            jpl.wr("int is " + bres);

            bres = jpl.isBaseType("float");
            jpl.wr("float is " + bres);

            bres = jpl.isBaseType("bool");
            jpl.wr("bool is " + bres);

            bres = jpl.isBaseType("string");
            jpl.wr("string is " + bres);

            jpl.wr("====================== TEST -1.60: Unit Tests: isArrayType ======================");
            bres = jpl.isArrayType("int[]");
            jpl.wr("int[] is " + bres);

            bres = jpl.isArrayType("float[]");
            jpl.wr("float[] is " + bres);

            bres = jpl.isArrayType("bool[]");
            jpl.wr("bool[] is " + bres);

            bres = jpl.isArrayType("string[]");
            jpl.wr("string[] is " + bres);

            bres = jpl.isArrayType("int");
            jpl.wr("int is " + bres);

            bres = jpl.isArrayType("float");
            jpl.wr("float is " + bres);

            bres = jpl.isArrayType("bool");
            jpl.wr("bool is " + bres);

            bres = jpl.isArrayType("string");
            jpl.wr("string is " + bres);            

            jpl.wr("====================== TEST -1.50: Unit Tests: isObject ======================");
            bres = jpl.isObject("1");
            jpl.wr("\"1\" is " + bres);

            bres = jpl.isObject(1);
            jpl.wr("1 is " + bres);            

            bres = jpl.isObject(-1);
            jpl.wr("-1 is " + bres);

            bres = jpl.isObject(1.25);
            jpl.wr("1.25 is " + bres);

            bres = jpl.isObject(1.0);
            jpl.wr("1.0 is " + bres);

            bres = jpl.isObject(1.00);
            jpl.wr("1.00 is " + bres);

            bres = jpl.isObject("1.0");
            jpl.wr("\"1.0\" is " + bres);            

            bres = jpl.isObject([]);
            jpl.wr("[] is " + bres);

            bres = jpl.isObject({});
            jpl.wr("{} is " + bres);

            bres = jpl.isObject(true);
            jpl.wr("true is " + bres);

            bres = jpl.isObject(false);
            jpl.wr("false is " + bres);            

            bres = jpl.isObject("test");
            jpl.wr("\"test\" is " + bres);

            jpl.wr("====================== TEST -1.50: Unit Tests: isArray ======================");
            bres = jpl.isArray("1");
            jpl.wr("\"1\" is " + bres);

            bres = jpl.isArray(1);
            jpl.wr("1 is " + bres);            

            bres = jpl.isArray(-1);
            jpl.wr("-1 is " + bres);

            bres = jpl.isArray(1.25);
            jpl.wr("1.25 is " + bres);

            bres = jpl.isArray(1.0);
            jpl.wr("1.0 is " + bres);

            bres = jpl.isArray(1.00);
            jpl.wr("1.00 is " + bres);

            bres = jpl.isArray("1.0");
            jpl.wr("\"1.0\" is " + bres);            

            bres = jpl.isArray([]);
            jpl.wr("[] is " + bres);

            bres = jpl.isArray({});
            jpl.wr("{} is " + bres);

            bres = jpl.isArray(true);
            jpl.wr("true is " + bres);

            bres = jpl.isArray(false);
            jpl.wr("false is " + bres);            

            bres = jpl.isArray("test");
            jpl.wr("\"test\" is " + bres);

            jpl.wr("====================== TEST -1.40: Unit Tests: isString ======================");
            bres = jpl.isString("1");
            jpl.wr("\"1\" is " + bres);

            bres = jpl.isString(1);
            jpl.wr("1 is " + bres);            

            bres = jpl.isString(-1);
            jpl.wr("-1 is " + bres);

            bres = jpl.isString(1.25);
            jpl.wr("1.25 is " + bres);

            bres = jpl.isString(1.0);
            jpl.wr("1.0 is " + bres);

            bres = jpl.isString(1.00);
            jpl.wr("1.00 is " + bres);

            bres = jpl.isString("1.0");
            jpl.wr("\"1.0\" is " + bres);            

            bres = jpl.isString([]);
            jpl.wr("[] is " + bres);

            bres = jpl.isString({});
            jpl.wr("{} is " + bres);

            bres = jpl.isString(true);
            jpl.wr("true is " + bres);

            bres = jpl.isString(false);
            jpl.wr("false is " + bres);            

            bres = jpl.isString("test");
            jpl.wr("\"test\" is " + bres);

            jpl.wr("====================== TEST -1.30: Unit Tests: isNumber ======================");
            bres = jpl.isNumber("1");
            jpl.wr("\"1\" is " + bres);

            bres = jpl.isNumber(1);
            jpl.wr("1 is " + bres);            

            bres = jpl.isNumber(-1);
            jpl.wr("-1 is " + bres);

            bres = jpl.isNumber(1.25);
            jpl.wr("1.25 is " + bres);

            bres = jpl.isNumber(1.0);
            jpl.wr("1.0 is " + bres);

            bres = jpl.isNumber(1.00);
            jpl.wr("1.00 is " + bres);

            bres = jpl.isNumber("1.0");
            jpl.wr("\"1.0\" is " + bres);            

            bres = jpl.isNumber([]);
            jpl.wr("[] is " + bres);

            bres = jpl.isNumber({});
            jpl.wr("{} is " + bres);

            bres = jpl.isNumber(true);
            jpl.wr("true is " + bres);

            bres = jpl.isNumber(false);
            jpl.wr("false is " + bres);            

            bres = jpl.isNumber("test");
            jpl.wr("\"test\" is " + bres);

            jpl.wr("====================== TEST -1.20: Unit Tests: isFloat ======================");
            bres = jpl.isFloat("1");
            jpl.wr("\"1\" is " + bres);

            bres = jpl.isFloat(1);
            jpl.wr("1 is " + bres);            

            bres = jpl.isFloat(-1);
            jpl.wr("-1 is " + bres);

            bres = jpl.isFloat(1.25);
            jpl.wr("1.25 is " + bres);

            bres = jpl.isFloat(1.0);
            jpl.wr("1.0 is " + bres);

            bres = jpl.isFloat(1.00);
            jpl.wr("1.00 is " + bres);

            bres = jpl.isFloat("1.0");
            jpl.wr("\"1.0\" is " + bres);            

            bres = jpl.isFloat([]);
            jpl.wr("[] is " + bres);

            bres = jpl.isFloat({});
            jpl.wr("{} is " + bres);

            bres = jpl.isFloat(true);
            jpl.wr("true is " + bres);

            bres = jpl.isFloat(false);
            jpl.wr("false is " + bres);            

            bres = jpl.isFloat("test");
            jpl.wr("\"test\" is " + bres);

            jpl.wr("====================== TEST -1.10: Unit Tests: isInteger ======================");
            bres = jpl.isInteger("1");
            jpl.wr("\"1\" is " + bres);

            bres = jpl.isInteger(1);
            jpl.wr("1 is " + bres);            

            bres = jpl.isInteger(-1);
            jpl.wr("-1 is " + bres);

            bres = jpl.isInteger(1.25);
            jpl.wr("1.25 is " + bres);

            bres = jpl.isInteger(1.0);
            jpl.wr("1.0 is " + bres);

            bres = jpl.isInteger(1.00);
            jpl.wr("1.00 is " + bres);

            bres = jpl.isInteger("1.0");
            jpl.wr("\"1.0\" is " + bres);

            bres = jpl.isInteger([]);
            jpl.wr("[] is " + bres);

            bres = jpl.isInteger({});
            jpl.wr("{} is " + bres);

            bres = jpl.isInteger(true);
            jpl.wr("true is " + bres);

            bres = jpl.isInteger(false);
            jpl.wr("false is " + bres);            

            bres = jpl.isInteger("test");
            jpl.wr("\"test\" is " + bres);

            jpl.wr("====================== TEST -1.00: Unit Tests: isBool ======================");       
            bres = jpl.isBool(true);
            jpl.wr("true is " + bres);

            bres = jpl.isBool("true");
            jpl.wr("\"true\" is " + bres);

            bres = jpl.isBool(1);
            jpl.wr("1 is " + bres);

            bres = jpl.isBool(1.0);
            jpl.wr("1.0 is " + bres);

            bres = jpl.isBool("1");
            jpl.wr("\"1\" is " + bres);

            bres = jpl.isBool("1.0");
            jpl.wr("\"1.0\" is " + bres);

            bres = jpl.isBool("yes");
            jpl.wr("\"yes\" is " + bres);

            bres = jpl.isBool(false);            
            jpl.wr("false is " + bres);

            bres = jpl.isBool("false");
            jpl.wr("\"false\" is " + bres);

            bres = jpl.isBool(0);
            jpl.wr("0 is " + bres);

            bres = jpl.isBool(0.0);
            jpl.wr("0.0 is " + bres);

            bres = jpl.isBool("0");
            jpl.wr("\"0\" is " + bres);

            bres = jpl.isBool("0.0");
            jpl.wr("\"0.0\" is " + bres);

            bres = jpl.isBool("no");
            jpl.wr("\"no\" is " + bres);

            bres = jpl.isBool("2");
            jpl.wr("\"2\" is " + bres);            

            bres = jpl.isBool("test");
            jpl.wr("\"test\" is " + bres);            

            bres = jpl.isBool(2);
            jpl.wr("2 is " + bres);            

            bres = jpl.isBool(1.25);
            jpl.wr("1.25 is " + bres);

            bres = jpl.isBool([]);
            jpl.wr("[] is " + bres);

            bres = jpl.isBool({});
            jpl.wr("{} is " + bres);

            /////////////////////////////////////////////////////////////////////////////

            if(!jpl.validateSysObjClass(jpl.program)) {
               jpl.wr("runProgram: Error: could not validate the class object.");
               return;
            }

            var res = null;
            var tmp = null;

            /////////////////////////////////////////////////////////////////////////////
            tmp = {"sys": "ref", "val":{"sys": "val", "type": "int", "v": "#.vars.[$.vars.name1]"}};
            if(!jpl.validateSysObjRef(tmp)) {
               jpl.wr("!invalid JSON");
               return;
            }            
            jpl.wr("====================== TEST 0.00: Dynamic Class Variable Reference ======================");
            jpl.wrObj(tmp);
            jpl.wr("REF 1:");
            res = jpl.processRef(tmp, code.funcs[0]);
            jpl.wrObj(res);      


            /////////////////////////TESTS: REFERENCE
            tmp = {"sys": "ref", "val":{"sys": "val", "type": "int", "v": "#.vars.tmp1"}};
            if(!jpl.validateSysObjRef(tmp)) {
               jpl.wr("!invalid JSON");
               return;
            }            
            jpl.wr("====================== TEST 1.00: Class Variable Reference ======================");
            jpl.wrObj(tmp);
            jpl.wr("REF 1:");
            res = jpl.processRef(tmp, code.funcs[0]);
            jpl.wrObj(res);

            tmp = {"sys": "ref", "val":{"sys": "val", "type": "int", "v": "$.args.i1"}};
            if(!jpl.validateSysObjRef(tmp)) {
               jpl.wr("!invalid JSON");
               return;
            }                        
            jpl.validateSysObjRef(tmp);
            jpl.wr("====================== TEST 1.10: Function Argument Reference ======================");
            jpl.wrObj(tmp);
            jpl.wr("REF 2:");
            res = jpl.processRef(tmp, code.funcs[0]);
            jpl.wrObj(res);

            tmp = {"sys": "ref", "val":{"sys": "val", "type": "int", "v": "$.vars.b1"}};
            if(!jpl.validateSysObjRef(tmp)) {
               jpl.wr("!invalid JSON");
               return;
            }                        
            jpl.validateSysObjRef(tmp);
            jpl.wr("====================== TEST 1.20: Function Variable Reference ======================");
            jpl.wrObj(tmp);
            jpl.wr("REF 3:");
            res = jpl.processRef(tmp, code.funcs[0]);
            jpl.wrObj(res);

            tmp = {"sys": "ref", "val":{"sys": "val", "type": "int", "v": "[#.vars.tmp5]"}};
            if(!jpl.validateSysObjRef(tmp)) {
               jpl.wr("!invalid JSON");
               return;
            }                        
            jpl.validateSysObjRef(tmp);
            jpl.wr("====================== TEST 1.30: Full Dynamic Variable Reference ======================");
            jpl.wrObj(tmp);
            jpl.wr("REF 4:");
            res = jpl.processRef(tmp, code.funcs[0]);
            jpl.wrObj(res);            


            /////////////////////////TESTS: ASSIGNMENT
            /*
            {
               "sys": "asgn",
               "left": {ref},
               "op": {op & type of asgn}, 
               "right": {ref | const | exp | bex | call}
            }
            */
            tmp = {
               "sys": "asgn",
               "left": {"sys":"ref", "val":{"sys": "val", "type": "int", "v": "$.args.i1"}},
               "op": {"sys":"op", "type":"asgn", "v":"="},
               "right": {"sys":"ref", "val":{"sys": "val", "type": "int", "v": "#.vars.tmp1"}}
            };
            if(!jpl.validateSysObjAsgn(tmp)) {
               jpl.wr("!invalid JSON");
               return;
            }
            jpl.wr("====================== TEST 2.00: Assignment (Class variable to function argument) ======================");
            jpl.wrObj(tmp);
            res = jpl.processAsgn(tmp, code.funcs[0]);
            jpl.wr("ASGN RESULT:");
            jpl.wrObj(res);
            tmp = {"sys": "call", "name": "SYS::getLastAsgnValue", "args": []};
            res = jpl.processCall(tmp, code.funcs[0]);
            jpl.wr("LAST ASGN VALUE:");
            jpl.wrObj(res);
            tmp = {"sys": "ref", "val":{"sys": "val", "type": "int", "v": "#.vars.tmp1"}};
            jpl.wr("REF #.vars.tmp1 VAL:");
            res = jpl.processRef(tmp, code.funcs[0]);
            jpl.wrObj(res);            

            tmp = {
               "sys": "asgn",
               "left": {"sys":"ref", "val":{"sys": "val", "type": "int", "v": "$.args.i1"}},
               "op": {"sys":"op", "type":"asgn", "v":"="},
               "right": {"sys":"const", "val":{"sys": "val", "type": "int", "v": "32"}}
            };
            if(!jpl.validateSysObjAsgn(tmp)) {
               jpl.wr("!invalid JSON");
               return;
            }            
            jpl.wr("====================== TEST 2.10: Assignment (Constant value to function argument) ======================");
            jpl.wrObj(tmp);
            res = jpl.processAsgn(tmp, code.funcs[0]);
            jpl.wr("ASGN RESULT:");
            jpl.wrObj(res);
            tmp = {"sys": "call", "name": "SYS::getLastAsgnValue", "args": []};
            res = jpl.processCall(tmp, code.funcs[0]);
            jpl.wr("LAST ASGN VALUE:");
            jpl.wrObj(res);            

            tmp = {
               "sys": "asgn",
               "left": {"sys":"ref", "val":{"sys": "val", "type": "int", "v": "$.args.i1"}},
               "op": {"sys":"op", "type":"asgn", "v":"="},
               "right": {"sys": "exp", "left": {"sys": "const", "val": {"sys": "val", "type": "int", "v": "25"}}, "op": {"sys":"op", "type":"exp", "v":"+"}, "right": {"sys":"ref", "val":{"sys": "val", "type": "int", "v": "$.args.i1"}}}
            };
            jpl.wr("====================== TEST 2.20: Assignment (Expression value to function argument) ======================");
            jpl.wrObj(tmp);
            res = jpl.processAsgn(tmp, code.funcs[0]);
            jpl.wr("ASGN RESULT:");
            jpl.wrObj(res);
            tmp = {"sys": "call", "name": "SYS::getLastAsgnValue", "args": []};
            res = jpl.processCall(tmp, code.funcs[0]);
            jpl.wr("LAST ASGN VALUE:");
            jpl.wrObj(res);
            tmp = {"sys": "call", "name": "SYS::getLastExpReturn", "args": []};
            res = jpl.processCall(tmp, code.funcs[0]);
            jpl.wr("LAST EXP RETURN:");
            jpl.wrObj(res);

            tmp = {
               "sys": "asgn",
               "left": {"sys":"ref", "val":{"sys": "val", "type": "int", "v": "$.vars.b1"}},
               "op": {"sys":"op", "type":"asgn", "v":"="},
               "right": {"sys": "bex", "left": {"sys":"ref", "val":{"sys": "val", "type": "int", "v": "$.args.i1"}}, "op": {"sys":"op", "type":"bex", "v":"=="}, "right": {"sys":"ref", "val":{"sys": "val", "type": "int", "v": "$.args.i1"}}}
            };
            jpl.wr("====================== TEST 2.30: Assignment (Boolean Expression value to function variable) ======================");
            jpl.wrObj(tmp);
            res = jpl.processAsgn(tmp, code.funcs[0]);
            jpl.wr("ASGN RESULT:");
            jpl.wrObj(res);
            tmp = {"sys": "call", "name": "SYS::getLastAsgnValue", "args": []};
            res = jpl.processCall(tmp, code.funcs[0]);
            jpl.wr("LAST ASGN VALUE:");
            jpl.wrObj(res);            

            tmp = {
               "sys": "asgn",
               "left": {"sys":"ref", "val":{"sys": "val", "type": "int", "v": "$.vars.b1"}},
               "op": {"sys":"op", "type":"asgn", "v":"="},
               "right": {"sys": "call", "name": "testFunction3", "args": [{"sys": "ref", "val":{"sys": "val", "type": "int", "v": "#.vars.tmp1"}}]}
            };
            jpl.wr("====================== TEST 2.40: Assignment (Function Call value to function variable) ======================");
            jpl.wrObj(tmp);
            res = jpl.processAsgn(tmp, code.funcs[0]);
            jpl.wr("ASGN RESULT:");
            jpl.wrObj(res);
            tmp = {"sys": "call", "name": "SYS::getLastAsgnValue", "args": []};
            res = jpl.processCall(tmp, code.funcs[0]);
            jpl.wr("LAST ASGN VALUE:");
            jpl.wrObj(res);
            tmp = {"sys": "ref", "val":{"sys": "val", "type": "int", "v": "#.vars.tmp1"}};
            jpl.wr("REF #.vars.tmp1 VAL:");
            res = jpl.processRef(tmp, code.funcs[0]);
            jpl.wrObj(res);


            ///////////////////////////TESTS: BOOLEAN EXPRESSIONS
            /* 
            {
               "sys": "bex",
               "left": {ref | const | exp | bex | call},
               "op": {op & type of bex}, 
               "right": {ref | const | exp | bex | call}
            }
            */   
            tmp = {
               "sys": "bex", 
               "left": {"sys": "const", "val": {"sys": "val", "type": "int", "v": "25"}}, 
               "op": {"sys":"op", "type":"bex", "v":"=="}, 
               "right": {"sys":"ref", "val":{"sys": "val", "type": "int", "v": "$.args.i1"}}
            };
            jpl.wr("====================== TEST 3.00: Boolean Expression (Function argument to Constant value) ======================");
            jpl.wrObj(tmp);
            res = jpl.processBex(tmp, code.funcs[0]);
            jpl.wr("BEX RESULT: (EXPECTS: FALSE)");
            jpl.wrObj(res);            
            tmp = {"sys": "ref", "val":{"sys": "val", "type": "int", "v": "$.args.i1"}};
            jpl.wr("REF $.args.i1 VAL:");
            res = jpl.processRef(tmp, code.funcs[0]);
            jpl.wrObj(res);            
            
            tmp = {
               "sys": "bex", 
               "left": {"sys": "const", "val": {"sys": "val", "type": "int", "v": "25"}}, 
               "op": {"sys":"op", "type":"bex", "v":">="}, 
               "right": {"sys": "const", "val": {"sys": "val", "type": "int", "v": "25"}}
            };
            jpl.wr("====================== TEST 3.05: Boolean Expression (Constant value to Constant value) ======================");
            jpl.wrObj(tmp);
            res = jpl.processBex(tmp, code.funcs[0]);
            jpl.wr("BEX RESULT: (EXPECTS: TRUE)");
            jpl.wrObj(res);  
            

            ///////////////////////////TESTS: NUMERIC EXPRESSIONS
            tmp = {
               "sys": "exp", 
               "left": {"sys": "const", "val": {"sys": "val", "type": "int", "v": "25"}}, 
               "op": {"sys":"op", "type":"exp", "v":"+"}, 
               "right": {"sys":"ref", "val":{"sys": "val", "type": "int", "v": "$.args.i1"}}
            };
            jpl.wr("====================== TEST 4.00: Expression ======================");
            jpl.wrObj(tmp);
            res = jpl.processExp(tmp, code.funcs[0]);
            jpl.wr("EXP RESULT:");
            jpl.wrObj(res);
            tmp = {"sys": "ref", "val":{"sys": "val", "type": "int", "v": "$.args.i1"}};
            jpl.wr("REF $.args.i1 VAL:");
            res = jpl.processRef(tmp, code.funcs[0]);
            jpl.wrObj(res);            


            ///////////////////////////TESTS: FUNCTION CALLS
            tmp = {
               "sys": "call", 
               "name": "testFunction2", 
               "args": [
                  {
                     "sys": "ref", 
                     "val":{
                        "sys": "val", 
                        "type": "int", 
                        "v": "#.vars.tmp1"
                     }
                  }
               ]   
            };
            jpl.wr("====================== TEST 5.00: Function Call ======================");
            jpl.wrObj(tmp);
            res = jpl.processCall(tmp, code.funcs[1]);
            jpl.wr("CALL RESULT:");
            jpl.wrObj(res);
            jpl.wr("CALL FUNCS[1] ARGS:");
            jpl.wrObjList(code.funcs[1].args);

            tmp = {
               "sys": "if",
               "left": {"sys": "const", "val": {"sys": "val","type": "bool","v": "true"}},
               "op": {"sys":"op", "type":"bex", "v":"=="},
               "right": {"sys": "const", "val": {"sys": "val","type": "bool","v": "true"}},
               "thn": [
                  {
                     "sys": "asgn",
                     "left": {"sys":"ref", "val":{"sys": "val", "type": "int", "v": "$.args.i1"}},
                     "op": {"sys":"op", "type":"asgn", "v":"="},
                     "right": {"sys":"ref", "val":{"sys": "val", "type": "int", "v": "#.vars.tmp1"}}
                  }
               ],
               "els": [
                  {
                     "sys": "asgn",
                     "left": {"sys":"ref", "val":{"sys": "val", "type": "int", "v": "$.args.i1"}},
                     "op": {"sys":"op", "type":"asgn", "v":"="},
                     "right": {"sys":"ref", "val":{"sys": "val", "type": "int", "v": "#.vars.tmp1"}}
                  }
               ]
            };
            jpl.wr("====================== TEST 6.00: If Statement ======================");
            jpl.wrObj(tmp);
            res = jpl.processIf(tmp, code.funcs[0]);
            jpl.wr("IF RESULT:");
            jpl.wrObj(res);
            tmp = {"sys": "ref", "val":{"sys": "val", "type": "int", "v": "$.args.i1"}};
            jpl.wr("REF $.args.i1 VAL:");
            res = jpl.processRef(tmp, code.funcs[0]);
            jpl.wrObj(res);
            tmp = {"sys": "ref", "val":{"sys": "val", "type": "int", "v": "#.vars.tmp1"}};
            jpl.wr("REF #.vars.tmp1 VAL:");
            res = jpl.processRef(tmp, code.funcs[0]);
            jpl.wrObj(res);
            tmp = {"sys": "call", "name": "SYS::getLastAsgnValue", "args": []};
            res = jpl.processCall(tmp, code.funcs[0]);
            jpl.wr("LAST ASGN VALUE:");
            jpl.wrObj(res);            
            

            tmp = {
               "sys": "for",
               "start": {"sys": "const", "val": {"sys": "val","type": "int","v": "0"}},
               "stop": {"sys": "const", "val": {"sys": "val","type": "int","v": "10"}},
               "inc": {"sys": "const", "val": {"sys": "val","type": "int","v": "1"}},
               "lines": [
                  {
                     "sys": "asgn",
                     "left": {"sys":"ref", "val":{"sys": "val", "type": "int", "v": "$.args.i1"}},
                     "op": {"sys":"op", "type":"asgn", "v":"="},
                     "right": {"sys":"ref", "val":{"sys": "val", "type": "int", "v": "#.vars.tmp1"}}
                  }
               ]
            };
            jpl.wr("====================== TEST 7.00: For Loop ======================");
            jpl.wrObj(tmp);
            res = jpl.processFor(tmp, code.funcs[0]);
            jpl.wr("FOR RESULT:");
            jpl.wrObj(res);
            tmp = {"sys": "ref", "val":{"sys": "val", "type": "int", "v": "$.args.i1"}};
            jpl.wr("REF $.args.i1 VAL:");
            res = jpl.processRef(tmp, code.funcs[0]);
            jpl.wrObj(res);
            tmp = {"sys": "ref", "val":{"sys": "val", "type": "int", "v": "#.vars.tmp1"}};
            jpl.wr("REF #.vars.tmp1 VAL:");
            res = jpl.processRef(tmp, code.funcs[0]);
            jpl.wrObj(res);
            tmp = {"sys": "call", "name": "SYS::getLastAsgnValue", "args": []};
            res = jpl.processCall(tmp, code.funcs[0]);
            jpl.wr("LAST ASGN VALUE:");
            jpl.wrObj(res);

            jpl.wr("====================== TEST 7.10: For Loop ======================");
            tmp = {"sys": "ref", "val":{"sys": "val", "type": "int", "v": "$.args.i1"}};
            jpl.wr("REF $.args.i1 VAL:");
            res = jpl.processRef(tmp, code.funcs[0]);
            jpl.wrObj(res);
            tmp = {
               "sys": "for",
               "start": {"sys": "const", "val": {"sys": "val","type": "int","v": "0"}},
               "stop": {"sys": "const", "val": {"sys": "val","type": "int","v": "10"}},
               "inc": {"sys": "const", "val": {"sys": "val","type": "int","v": "1"}},
               "lines": [
                  {
                     "sys": "asgn",
                     "left": {"sys":"ref", "val":{"sys": "val", "type": "int", "v": "$.args.i1"}},
                     "op": {"sys":"op", "type":"asgn", "v":"="},
                     "right": {"sys": "exp", "left": {"sys": "ref", "val": {"sys": "val", "type": "int", "v": "$.args.i1"}}, "op": {"sys":"op", "type":"exp", "v":"+"}, "right": {"sys":"const", "val":{"sys": "val", "type": "int", "v": "1"}}}
                  }
               ]
            };
            
            jpl.wrObj(tmp);
            res = jpl.processFor(tmp, code.funcs[0]);
            jpl.wr("FOR RESULT:");
            jpl.wrObj(res);
            tmp = {"sys": "ref", "val":{"sys": "val", "type": "int", "v": "$.args.i1"}};
            jpl.wr("REF $.args.i1 VAL:");
            res = jpl.processRef(tmp, code.funcs[0]);
            jpl.wrObj(res);
            tmp = {"sys": "call", "name": "SYS::getLastAsgnValue", "args": []};
            res = jpl.processCall(tmp, code.funcs[0]);
            jpl.wr("LAST ASGN VALUE:");
            jpl.wrObj(res);

            jpl.wr("====================== TEST 8.00: Call Statement ======================");
            var callObj = code.call;
            var callFuncName = jpl.toStr(callObj.name);
            var callFunc = jpl.findFunc(callFuncName);
            res = jpl.processCall(callObj, callFunc);
            jpl.wr("RUN FUNCTION 1: " + callFuncName);
            jpl.wrObj(res);

            res = jpl.processCall(callObj, callFunc);
            jpl.wr("RUN FUNCTION 2: " + callFuncName);
            jpl.wrObj(res);

            jpl = new jsonPlState();
            jpl.program = JSON.parse(JSON.stringify(code));
            tmp = jpl.program;
            jpl.wr("====================== TEST 9.00: Full Program 1 ======================");
            jpl.wrObj(tmp);
            jpl.runProgram();

            jpl.wr("====================== TEST 10.00: Full Program 2 ======================");
            var jplData = [ "33", "true" ];
            var jplCode = JSON.parse(JSON.stringify(code));

            function test(dataFromAjax, jplCodeFromAjax) {
               console.log("test method");
               var jpl = new jsonPlState();
               jpl.program = jplCodeFromAjax;
               jpl.program.vars[0].val.v = dataFromAjax[0];
               jpl.program.vars[1].val.v = dataFromAjax[1];   
               var tmp = jpl.runProgram();
               return tmp.val.v;
            }

            jpl.wr("TEST METHOD");
            jpl.wr(test.toString());

            jpl.wr("TEST METHOD DATA");
            jpl.wr(jplData.toString());

            var jplRes = test(jplData, jplCode);
            jpl.wr("Example Code Result: " + jplRes);

            jpl = new jsonPlState();
            jpl.program = JSON.parse(JSON.stringify(code2));
            tmp = jpl.program;
            jpl.wr("====================== TEST 11.00: Full Program 3 ======================");
            jpl.wrObj(tmp);
            jpl.runProgram();
            

            /////////////////////////////////////////////////////////////////////////////
            tmp = {"sys": "ref", "val":{"sys": "val", "type": "int", "v": "#.vars.[$.vars.name1]"}};
            if(!jpl.validateSysObjRef(tmp)) {
               jpl.wr("!invalid JSON");
               return;
            }            
            jpl.wr("====================== TEST 12.00: Dynamic Class Variable Reference ======================");
            jpl.wrObj(tmp);
            jpl.wr("REF 1:");
            res = jpl.processRef(tmp, code.funcs[0]);
            jpl.wrObj(res);            
            
            tmp = {"sys": "ref", "val":{"sys": "val", "type": "int", "v": "#.vars.[$.vars.[$.vars.name2]]"}};
            if(!jpl.validateSysObjRef(tmp)) {
               jpl.wr("!invalid JSON");
               return;
            }            
            jpl.wr("====================== TEST 12.01: Dynamic Class Variable Reference 2 ======================");
            jpl.wrObj(tmp);
            jpl.wr("REF 1:");
            res = jpl.processRef(tmp, code.funcs[0]);
            jpl.wrObj(res);


			   /////////////////////////////////////////////////////////////////////////////
            //tmp = '{"sys": "ref", "val":{"sys": "val", "type": "int", "v": "#.vars.[$.vars.[$.vars.name2]]"}};';
			   tmp = '{"sys": "ref", "val":{"sys": "val", "type": "int", "v": "@(repl::classOrFunc).vars.[$.@(repl::varsOrArgs).[$.vars.@(repl::varOrArgName)]]"}}';
			   jpl.wr("====================== TEST 13.00: Pre-Processing Replacement Directives Prep ======================");
			   jpl.wr("Check for replace directives in string form.");
            if(jpl.hasReplDirectives(tmp)) {
               jpl.wr("Found replace directives...");
               jpl.wr("Before: " + tmp);
               var keys = [];
               var vals = [];
               keys.push('varOrArgName');
               vals.push('name2');
               
               keys.push('varsOrArgs');
               vals.push('vars');				
               
               keys.push('classOrFunc');
               vals.push('#');				
               tmp = jpl.processReplDirectives(keys, vals, tmp);
               jpl.wr("After: " + tmp);				
            }
			   tmp = JSON.parse(tmp);
			
            if(!jpl.validateSysObjRef(tmp)) {
               jpl.wr("!invalid JSON");
               return;
            }
                    
            jpl.wr("====================== TEST 13.00: Pre-Processing Replacement Directives Execution ======================");
            jpl.wrObj(tmp);
            jpl.wr("REF 1:");
            res = jpl.processRef(tmp, code.funcs[0]);
            jpl.wrObj(res);
            
            
            /////////////////////////TESTS: REFERENCE ARRAY
            jpl = new jsonPlState();
            jpl.program = JSON.parse(JSON.stringify(code));
            
            if(!jpl.validateSysObjClass(jpl.program)) {
               jpl.wr("runProgram: Error: could not validate the class object.");
               return;
            }

            tmp = {"sys": "ref", "val":{"sys": "val", "type": "int", "v": "#.vars.tmp4"}};
            if(!jpl.validateSysObjRef(tmp)) {
               jpl.wr("!invalid JSON");
               return;
            }            
            jpl.wr("====================== TEST 13.01: Class Variable Array Reference ======================");
            jpl.wrObj(tmp);
            jpl.wr("REF 1:");
            res = jpl.processRef(tmp, code.funcs[0]);
            jpl.wrObj(res);
            
            tmp = {"sys": "ref", "val":{"sys": "val", "type": "int", "v": "#.vars.tmp4.0"}};
            if(!jpl.validateSysObjRef(tmp)) {
               jpl.wr("!invalid JSON");
               return;
            }            
            jpl.wr("====================== TEST 13.02: Class Variable Array Index Reference ======================");
            jpl.wrObj(tmp);
            jpl.wr("REF 1:");
            res = jpl.processRef(tmp, code.funcs[0]);
            jpl.wrObj(res);            
         }
      </script>
   </head>
   <body style="padding: 4px;" onload="init()">
<span style="font-size:14px;">Test Results:</span><br/>
<textarea cols="125" rows="25" id="message" style="font-size:12px;">
</textarea>
   </body>
</html>